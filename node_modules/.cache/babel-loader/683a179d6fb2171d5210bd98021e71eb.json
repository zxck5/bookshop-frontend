{"ast":null,"code":"import _defineProperty from\"/Users/jiwon/Desktop/spring-boot/BookShop/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/jiwon/Desktop/spring-boot/BookShop/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/Users/jiwon/Desktop/spring-boot/BookShop/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/jiwon/Desktop/spring-boot/BookShop/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{Form}from\"react-bootstrap\";import{useNavigate}from\"react-router-dom\";import axios from\"axios\";import Select from\"react-select\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function(){var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),memberList=_useState2[0],setMemberList=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),productList=_useState4[0],setProductList=_useState4[1];var _useState5=useState({member_id:'',product_id:[],quantity:''}),_useState6=_slicedToArray(_useState5,2),state=_useState6[0],setState=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),price=_useState8[0],setPrice=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),selectedOptions=_useState10[0],setSelectedOptions=_useState10[1];var optionList=[];useEffect(function(){//memberList\n//productList\naxios.get(\"/members\").then(function(res){return setMemberList(res.data);});axios.get(\"/items\").then(function(res){return setProductList(res.data);});},[]);var submitForm=function submitForm(e){e.preventDefault();var formData=new FormData();selectedOptions.map(function(s){state.product_id=[].concat(_toConsumableArray(state.product_id),[s.value]);});console.log(state.product_id);Object.keys(state).map(function(key){formData.append(key,state[key]);});axios.post(\"/order/new\",formData).then(function(res){console.log(res);if(res.data==true){alert(\"order created\");navigate(\"/\");}else alert(res.data);}).catch(function(err){alert(err);});};var setInput=function setInput(event){var name=event.target.name;var value=event.target.value;setState(_objectSpread(_objectSpread({},state),{},_defineProperty({},name,value)));};var handleSelect=function handleSelect(data){setSelectedOptions(data);};return/*#__PURE__*/_jsxs(Form,{onSubmit:submitForm,children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Form.Select,{size:\"sm\",name:\"member_id\",onChange:setInput,children:[/*#__PURE__*/_jsx(\"option\",{children:\"select member\"}),memberList.map(function(m,index){return/*#__PURE__*/_jsx(\"option\",{value:m.id,children:m.email},index);})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),productList.map(function(p){optionList=[].concat(_toConsumableArray(optionList),[{value:p.id,label:p.name}]);if(p.id==state.product_id){return/*#__PURE__*/_jsxs(\"div\",{children:[\" stock quantity : \",p.stockQuantity]});}}),/*#__PURE__*/_jsx(Select,{options:optionList,placeholder:\"Select\",value:selectedOptions,onChange:handleSelect,isSearchable:true,isMulti:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Quantity: \",' ',/*#__PURE__*/_jsx(\"input\",{id:\"quantity\",type:\"text\",placeholder:\"type quantity\",name:\"quantity\",onChange:setInput})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"submit\"})]});}","map":{"version":3,"names":["useState","useEffect","Form","useNavigate","axios","Select","navigate","memberList","setMemberList","productList","setProductList","member_id","product_id","quantity","state","setState","price","setPrice","selectedOptions","setSelectedOptions","optionList","get","then","res","data","submitForm","e","preventDefault","formData","FormData","map","s","value","console","log","Object","keys","key","append","post","alert","catch","err","setInput","event","name","target","handleSelect","m","index","id","email","p","label","stockQuantity"],"sources":["/Users/jiwon/Desktop/spring-boot/BookShop/frontend/src/orders/OrderCreate.js"],"sourcesContent":["import {useState,useEffect} from 'react';\nimport {Form} from \"react-bootstrap\";\nimport {useNavigate} from \"react-router-dom\";\nimport axios from \"axios\";\nimport Select from \"react-select\";\n\n\n\n\nexport default function () {\n    const navigate = useNavigate();\n\n    const [memberList,setMemberList] = useState([]);\n    const[productList, setProductList] = useState([]);\n    const [state, setState] = useState({\n        member_id : '',\n        product_id : [],\n        quantity : ''\n    });\n\n    const [price , setPrice] = useState('');\n    const [selectedOptions, setSelectedOptions] = useState();\n    let optionList = [];\n\n\n    useEffect(() => {\n        //memberList\n        //productList\n        axios.get(\"/members\")\n            .then(res => setMemberList(res.data))\n\n        axios.get(\"/items\")\n            .then(res => setProductList(res.data))\n\n\n\n    },[])\n\n\n    const submitForm = (e) => {\n        e.preventDefault();\n        const formData = new FormData();\n        selectedOptions.map(s => {\n            state.product_id = [...state.product_id, s.value]\n        })\n        console.log(state.product_id);\n\n        Object.keys(state).map(key => {\n            formData.append(key, state[key]);\n        })\n        axios.post(\"/order/new\",formData)\n            .then(res => {\n                console.log(res);\n                if (res.data == true) {\n                    alert(\"order created\");\n                    navigate(\"/\")\n\n\n                } else alert(res.data);\n            }).catch(err => {\n            alert(err);\n        })\n\n    }\n\n    const setInput = (event) => {\n        let name = event.target.name;\n        let value = event.target.value;\n        setState({...state, [name] : value })\n    }\n\n    const handleSelect = (data) => {\n        setSelectedOptions(data);\n    }\n\n\n    return(\n        <Form onSubmit={submitForm}>\n\n            <br/><br/>\n            <Form.Select size=\"sm\" name={\"member_id\"} onChange={setInput}>\n                <option>select member</option>\n                {\n                    memberList.map((m,index)=> (\n                        <option key = {index} value={m.id}>\n                            {m.email }\n                        </option>\n                    ))\n                }\n            </Form.Select>\n\n\n            <br/><br/>\n            {/*<Form.Select size=\"sm\" name={\"product_id\"} onChange={setInput}>*/}\n            {/*    <option>select product</option>*/}\n            {/*    {*/}\n            {/*        productList.map((p,index)=> (*/}\n            {/*            <option key = {index} value={p.id}>*/}\n            {/*                {p.name}*/}\n            {/*            </option>*/}\n            {/*        ))*/}\n            {/*    }*/}\n            {/*</Form.Select>*/}\n            {productList.map(p => {\n                optionList = [...optionList, {\n                    value : p.id,\n                    label : p.name\n                }]\n\n                if (p.id == state.product_id) {\n                    return <div> stock quantity : {p.stockQuantity}</div>\n                }\n            })}\n            <Select\n                options={optionList}\n                placeholder={\"Select\"}\n                value={selectedOptions}\n                onChange={handleSelect}\n                isSearchable={true}\n                isMulti\n            />\n\n\n\n\n            <br/><br/>\n\n            <label>Quantity: {' '}\n                <input id={\"quantity\"} type=\"text\" placeholder=\"type quantity\" name={\"quantity\"} onChange={setInput}/>\n            </label>\n            <br/><br/>\n\n            <input type=\"submit\" value={\"submit\"}/>\n\n        </Form>\n    )\n}\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}